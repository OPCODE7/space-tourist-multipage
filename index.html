<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./styles/home.css">
  <link rel="stylesheet" href="./styles/destination.css">
  <link rel="stylesheet" href="./styles/crew.css">
  <link rel="stylesheet" href="./styles/technology.css">
  <title>Frontend Mentor | Space tourism website</title>
</head>

<body class="min-vh-100">
  <div class="container-fluid bg-home w-100 min-vh-100 p-0 d-flex flex-column" id="bg-page">
    <nav class="navbar navbar-expand-md flex-grow-0">
      <div class="container-fluid row p-0 m-0 ">
        <a data-url="./starter-code/home.html" class="col-2">
          <img src="./assets/shared/logo.svg" class="img-fluid" alt="logo">
        </a>
        <button class="navbar-toggler col-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
          aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
          <i class="fa-solid fa-bars text-white fs-1"></i>
        </button>


        <div class="offcanvas offcanvas-end px-2 flex-grow-0 h-100 w-75" tabindex="-1" id="offcanvasNavbar"
          aria-labelledby="offcanvasNavbarLabel">
          <div class="border-bottom border-secondary separator-line col-5 z-1 d-none d-lg-block"></div>
          <div class="offcanvas-header d-flex justify-content-end d-md-none">
            <i class="fa-solid fa-xmark text-light fs-1 btn" data-bs-dismiss="offcanvas" aria-label="Close"></i>
          </div>
          <div class="offcanvas-body py-3">
            <ul class="navbar-nav justify-content-start justify-content-md-center flex-grow-0 p-2 ps-lg-4 h-50">
              <li class="nav-item mb-2 mb-md-0 me-md-3 p-1">
                <a class="nav-link text-light text-uppercase nav-text p-0 nav-link-is-active" aria-current="page"
                  data-url="./starter-code/home.html"><span class="fw-bold nav-text d-md-none d-lg-inline">00</span>
                  Home</a>
              </li>
              <li class="nav-item mb-2 mb-md-0 me-md-3 p-1">
                <a class="nav-link text-light text-uppercase nav-text p-0"
                  data-url="./starter-code/destination.html"><span class="fw-bold d-md-none d-lg-inline">01</span>
                  Destination</a>
              </li>
              <li class="nav-item mb-2 mb-md-0 me-md-3 p-1">
                <a class="nav-link text-light text-uppercase nav-text p-0" data-url="./starter-code/crew.html"><span
                    class="fw-bold d-md-none d-lg-inline">02</span>
                  Crew</a>
              </li>
              <li class="nav-item mb-2 mb-md-0 me-md-3 p-1">
                <a class="nav-link text-light text-uppercase nav-text p-0"
                  data-url="./starter-code/technology.html"><span class="fw-bold d-md-none d-lg-inline">03</span>
                  Technology</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <main
      class="container-fluid row d-flex flex-column flex-lg-row justify-content-around  align-items-center flex-grow-1">
      <div data-include="./starter-code/home.html"></div>
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
    </script>

  <script type="module">
    import setBackgroundResponsive from "./js/background_responsive.js";
    import includeHTML from "./js/include_layout.js";
    import DataDestination from "./js/destination_page.js";
    import DataCrew from "./js/crew_page.js";
    import DataTechnology from "./js/technology_page.js";

    const d = document;
    const $background = d.querySelector("#bg-page");
    const objBackgrounds = {
      "./starter-code/home.html": ["bg-home", "bg-home-md", "bg-home-lg"],
      "./starter-code/destination.html": ["bg-destination", "bg-destination-md", "bg-destination-lg"],
      "./starter-code/crew.html": ["bg-crew", "bg-crew-md", "bg-crew-lg"],
      "./starter-code/technology.html": ["bg-technology", "bg-technology-md", "bg-technology-lg"]
    }


    window.addEventListener("resize", e => {
      setBackgroundResponsive($background, "bg-home", "bg-home-md", "bg-home-lg");
    });


    d.addEventListener("DOMContentLoaded", e => {
      setBackgroundResponsive($background, "bg-home", "bg-home-md", "bg-home-lg");
      const $replaceElement = d.querySelector("[data-include]");
      includeHTML($replaceElement, $replaceElement.getAttribute("data-include"));
    });

    d.addEventListener("click", e => {
      if (e.target.matches(".nav-link")) {
        const $replaceElement = d.querySelector("main > div");
        let dataUrl = e.target.getAttribute("data-url");
        $replaceElement.setAttribute("data-include", dataUrl);
        includeHTML($replaceElement, $replaceElement.getAttribute("data-include"));
        let getNamePage = dataUrl.slice(dataUrl.lastIndexOf('/') + 1).replace(".html", "");

        if (getNamePage === "destination") {
          setTimeout(() => {
            const $destinationName = d.getElementById("destination-name"),
              $destinationInfo = d.getElementById("destination-info"),
              $avgDistance = d.getElementById("avg-distance"),
              $travelTime = d.getElementById("travel-time"),
              $imgDestination = d.getElementById("destination-image"),
              $linksDestinations = d.querySelectorAll(".link-destination");
            let destination = new DataDestination($destinationName, $destinationInfo, $avgDistance, $travelTime, $imgDestination, $linksDestinations);

            destination.loadDataDestination();
          }, 100);
        }

        if (getNamePage === "crew") {
          setTimeout(() => {
            const $crewName = d.getElementById("crew-name"),
              $crewRol = d.getElementById("crew-rol"),
              $crewBio = d.getElementById("crew-bio"),
              $imgCrew = d.getElementById("crew-image"),
              $linksCrews = d.querySelectorAll(".link-crew");

            let crew = new DataCrew($crewName, $crewRol, $crewBio, $imgCrew, $linksCrews);
            crew.loadDataCrew();
          }, 100);
        }

        if (getNamePage === "technology") {
          setTimeout(() => {
            const $technologyName = d.getElementById("technology-name"),
              $technologyDescription = d.getElementById("tech-description"),
              $imgTechnology = d.getElementById("technology-image"),
              $linksTechnology = d.querySelectorAll(".link-technology");

            let tech = new DataTechnology($technologyName, $technologyDescription, $imgTechnology, $linksTechnology);
            tech.loadDataTech();

          }, 100);
        }
      }
    });


  </script>
</body>

</html>